!function(){function e(e,t){for(let o=0;o<e.length;o++){var n=e[0];e[o].onclick=function(s){s.preventDefault(),n&&n!=e[o]&&n.classList.remove(t),e[o].classList.toggle(t),n=e[o]}}}e(document.getElementsByClassName("menu__item"),"is-active"),e(document.getElementsByClassName("member"),"is-active")}();const menu=function(){let e=document.querySelector(".menu-btn"),t=document.querySelector(".header"),n=document.querySelector("body"),o=document.querySelector(".nav__list"),s=!1;function c(){e.classList.toggle("is-active"),t.classList.toggle("is-active"),n.classList.toggle("locked"),s=!s}return document.addEventListener("keydown",function(e){27==e.keyCode&&s&&c()}),{menuOver:function(){e.addEventListener("click",c),o.addEventListener("click",function(e){e.target.classList.contains("nav__link")&&n.offsetWidth<=768&&c()})}}}();menu.menuOver();const overlay=function(){let e=document.querySelector("body"),t=document.querySelector(".modal"),n=document.querySelector(".modal__inner"),o=document.createElement("div");o.classList.add("modal__text");let s=document.createElement("button"),c=function(){t.classList.remove("is-active"),e.classList.remove("locked")};return{open:function(a,l){o.textContent=a,l?(s.classList.add("order-button"),s.textContent="Закрыть"):s.classList.add("modal__close"),n.appendChild(o),n.appendChild(s),t.classList.add("is-active"),e.classList.add("locked"),s.addEventListener("click",e=>{e.preventDefault(),c()}),t.addEventListener("click",e=>{e.target===t&&c()}),document.addEventListener("keydown",e=>{27===e.keyCode&&c()})},close:c}}(),ajaxForm=function(e){let t=new FormData;t.append("name",e.elements.name.value),t.append("phone",e.elements.phone.value),t.append("comment",e.elements.textarea.value),t.append("to","client@mail.ru");const n=new XMLHttpRequest;return n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(t),n},submitForm=function(e){e.preventDefault();let t=document.querySelector("#order-form"),n=ajaxForm(t);n.addEventListener("load",()=>{let e=!1;if(n.status>=400){let t="Ошибка соединения с сервером, попробуйте позже";overlay.open(`${t}. Ошибка ${n.status}`,e)}else 0==n.response.status?(content=n.response.message,overlay.open(content,e)):(content="Сообщение отправлено",e=!0,overlay.open(content,e))})},form=document.querySelector("#order-form");form.addEventListener("submit",submitForm),function(){let e=document,t=e.querySelector(".candy-bar__list"),n=e.querySelectorAll(".candy-bar__item").length,o=e.querySelector(".candy-bar__slider"),s=e.querySelector("#back"),c=e.querySelector("#forward"),a=0;var l,r;function i(){t.style.transform="translateX("+-a*o.offsetWidth+"px)"}function d(){0==a?a=n-1:a--,i()}function u(){a==n-1?a=0:a++,i(),i()}s.addEventListener("click",d),c.addEventListener("click",u),window.addEventListener("resize",i),o.addEventListener("touchstart",function(e){l=e.touches[0].clientX,r=e.touches[0].clientY},!1),o.addEventListener("touchend",function(e){var t,n;t=e.changedTouches[0].clientX-l,n=e.changedTouches[0].clientY-r;var o=Math.abs(t)-Math.abs(n);t<0&&o>0?u():t>0&&o>0&&d()},!1)}(),function(){const e=document.querySelector(".reviews__list"),t=document.querySelectorAll(".reviews__pix-item");let n=0;for(let o=0;o<t.length;o++)t[o].addEventListener("click",function(s){s.preventDefault(),e.style.left=-100*o+"%",t[o].classList.toggle("is-active"),t[n].classList.toggle("is-active"),n=o})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZGVvbi5qcyIsIm1lbnUuanMiLCJyZXF1ZXN0LmpzIiwic2xpZGVyLmpzIiwic2xpZGVyUmV2aWV3cy5qcyJdLCJuYW1lcyI6WyJhY3RpdmF0ZSIsImFyciIsInN0ciIsImkiLCJsZW5ndGgiLCJhY3RpdmUiLCJvbmNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibWVudSIsImJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJoZWFkZXIiLCJib2R5IiwibmF2IiwiYWN0IiwidG9nZ2xlTWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJrZXlDb2RlIiwibWVudU92ZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIm9mZnNldFdpZHRoIiwib3ZlcmxheSIsIm1vZGFsIiwibW9kYWxJbm5lciIsIm1vZGFsVGV4dCIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJjbG9zZU92ZXJsYXkiLCJvcGVuIiwiY29udGVudCIsInJlcGx5IiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImNsb3NlIiwiYWpheEZvcm0iLCJmb3JtIiwiZGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiZWxlbWVudHMiLCJuYW1lIiwidmFsdWUiLCJwaG9uZSIsInRleHRhcmVhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVR5cGUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInN1Ym1pdEZvcm0iLCJyZXF1ZXN0Iiwic3RhdHVzIiwicmVzcG9uc2UiLCJtZXNzYWdlIiwiZCIsImxpc3QiLCJpdGVtQ291bnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2xpZGVyIiwiYmFjayIsImZvcndhcmQiLCJwb3MiLCJjbGllbnRYIiwiY2xpZW50WSIsInNldFRyYW5zZm9ybSIsInN0eWxlIiwidHJhbnNmb3JtIiwicHJldiIsIm5leHQiLCJ3aW5kb3ciLCJ0b3VjaGVzIiwiZGVsdGFYIiwiZGVsdGFZIiwiY2hhbmdlZFRvdWNoZXMiLCJtb2QiLCJNYXRoIiwiYWJzIiwiaXRlbXMiLCJsZWZ0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFNBQUFBLEVBQUFDLEVBQUFDLEdBQ0EsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUFHLE9BQUFELElBQUEsQ0FDQSxJQUFBRSxFQUFBSixFQUFBLEdBQ0FBLEVBQUFFLEdBQUFHLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUMsaUJBQ0FILEdBQUFBLEdBQUFKLEVBQUFFLElBQ0FFLEVBQUFJLFVBQUFDLE9BQUFSLEdBQ0FELEVBQUFFLEdBQUFNLFVBQUFFLE9BQUFULEdBQ0FHLEVBQUFKLEVBQUFFLEtBS0FILEVBREFZLFNBQUFDLHVCQUFBLGNBQ0EsYUFHQWIsRUFEQVksU0FBQUMsdUJBQUEsVUFDQSxhQWpCQSxHQ0FBLE1BQUFDLEtBQUEsV0FDQSxJQUFBQyxFQUFBSCxTQUFBSSxjQUFBLGFBQ0FDLEVBQUFMLFNBQUFJLGNBQUEsV0FDQUUsRUFBQU4sU0FBQUksY0FBQSxRQUNBRyxFQUFBUCxTQUFBSSxjQUFBLGNBQ0FJLEdBQUEsRUFFQSxTQUFBQyxJQUNBTixFQUFBTixVQUFBRSxPQUFBLGFBQ0FNLEVBQUFSLFVBQUFFLE9BQUEsYUFDQU8sRUFBQVQsVUFBQUUsT0FBQSxVQUVBUyxHQUFBQSxFQW1CQSxPQU5BUixTQUFBVSxpQkFBQSxVQUFBLFNBQUFmLEdBQ0EsSUFBQUEsRUFBQWdCLFNBQUFILEdBQ0FDLE1BSUEsQ0FDQUcsU0FqQkEsV0FDQVQsRUFBQU8saUJBQUEsUUFBQUQsR0FFQUYsRUFBQUcsaUJBQUEsUUFBQSxTQUFBZixHQUNBQSxFQUFBa0IsT0FDQWhCLFVBQUFpQixTQUFBLGNBQUFSLEVBQUFTLGFBQUEsS0FDQU4sUUFyQkEsR0FxQ0FQLEtBQUFVLFdDckNBLE1BQUFJLFFBQUEsV0FDQSxJQUFBVixFQUFBTixTQUFBSSxjQUFBLFFBQ0FhLEVBQUFqQixTQUFBSSxjQUFBLFVBQ0FjLEVBQUFsQixTQUFBSSxj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RSxlQUFBLEdBQUFYLFFBQUFBLEVBQ0FVLEVBQUF4RSxFQUFBeUUsZUFBQSxHQUFBVixRQUFBQSxFQUNBLElBQUFXLEVBQUFDLEtBQUFDLElBQUFMLEdBQUFJLEtBQUFDLElBQUFKLEdBRUFELEVBQUEsR0FBQUcsRUFBQSxFQUNBTixJQUNBRyxFQUFBLEdBQUFHLEVBQUEsR0FDQVAsTUFFQSxHQXpEQSxHQ0FBLFdBQ0EsTUFBQVosRUFBQWxELFNBQUFJLGNBQUEsa0JBQ0FvRSxFQUFBeEUsU0FBQW9ELGlCQUFBLHNCQUNBLElBQUEzRCxFQUFBLEVBRUEsSUFBQSxJQUFBRixFQUFBLEVBQUFBLEVBQUFpRixFQUFBaEYsT0FBQUQsSUFDQWlGLEVBQUFqRixHQUFBbUIsaUJBQUEsUUFBQSxTQUFBZixHQUNBQSxFQUFBQyxpQkFDQXNELEVBQUFVLE1BQUFhLE1BQUEsSUFBQWxGLEVBQUEsSUFDQWlGLEVBQUFqRixHQUFBTSxVQUFBRSxPQUFBLGFBQ0F5RSxFQUFBL0UsR0FBQUksVUFBQUUsT0FBQSxhQUNBTixFQUFBRixJQVhBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcclxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKGFycixzdHIpIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYWN0aXZlID0gYXJyWzBdO1xyXG4gICAgICAgIGFycltpXS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGlmIChhY3RpdmUgJiYgYWN0aXZlICE9IGFycltpXSkge1xyXG4gICAgICAgICAgICBhY3RpdmUuY2xhc3NMaXN0LnJlbW92ZShzdHIpO1xyXG4gICAgICAgICAgfSBhcnJbaV0uY2xhc3NMaXN0LnRvZ2dsZShzdHIpO1xyXG4gICAgICAgICAgICBhY3RpdmUgPSBhcnJbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9IFxyXG4gICAgfVxyXG4gICAgbGV0IG1lbnVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWVudV9faXRlbScpO1xyXG4gICAgYWN0aXZhdGUobWVudUxpc3QsICdpcy1hY3RpdmUnKTtcclxuXHJcbiAgICBsZXQgdGVhbUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtZW1iZXInKTtcclxuICAgIGFjdGl2YXRlKHRlYW1MaXN0LCAnaXMtYWN0aXZlJyk7XHJcblxyXG59KCkpOyIsImNvbnN0IG1lbnUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWJ0bicpO1xyXG4gIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XHJcbiAgbGV0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgbGV0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZfX2xpc3QnKTtcclxuICBsZXQgYWN0ID0gZmFsc2U7XHJcblxyXG4gIGZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2xvY2tlZCcpO1xyXG5cclxuICAgICAgYWN0ID8gYWN0ID0gZmFsc2UgOiBhY3QgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgbGV0IGFkZExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1lbnUpO1xyXG5cclxuICAgICAgICBuYXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCduYXZfX2xpbmsnKSAmJiBib2R5Lm9mZnNldFdpZHRoIDw9IDc2OCkge1xyXG4gICAgICAgICAgICB0b2dnbGVNZW51KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcgJiYgYWN0KSB7XHJcbiAgICAgICAgICB0b2dnbGVNZW51KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbWVudU92ZXI6IGFkZExpc3RlbmVycyAgXHJcbiAgfVxyXG5cclxufSgpKTtcclxuXHJcbm1lbnUubWVudU92ZXIoKTsiLCJjb25zdCBvdmVybGF5ID0gKGZ1bmN0aW9uKCl7XHJcbiAgbGV0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XHJcbiAgbGV0IG1vZGFsSW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lubmVyJyk7XHJcblxyXG4gIGxldCBtb2RhbFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBtb2RhbFRleHQuY2xhc3NMaXN0LmFkZCgnbW9kYWxfX3RleHQnKTtcclxuICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblxyXG4gIGxldCBvcGVuT3ZlcmxheSA9IGZ1bmN0aW9uKGNvbnRlbnQsIHJlcGx5KSB7XHJcbiAgICBtb2RhbFRleHQudGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgaWYocmVwbHkpIHtcclxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29yZGVyLWJ1dHRvbicpO1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAn0JfQsNC60YDRi9GC0YwnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ21vZGFsX19jbG9zZScpO1xyXG4gICAgfVxyXG4gICAgbW9kYWxJbm5lci5hcHBlbmRDaGlsZChtb2RhbFRleHQpO1xyXG4gICAgbW9kYWxJbm5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG5cclxuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdsb2NrZWQnKTtcclxuXHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNsb3NlT3ZlcmxheSgpO1xyXG4gICAgfSlcclxuXHJcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIHtcclxuICAgICAgICBjbG9zZU92ZXJsYXkoKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIFxyXG4gICAgICAgIGNsb3NlT3ZlcmxheSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsZXQgY2xvc2VPdmVybGF5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9ja2VkJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgb3Blbjogb3Blbk92ZXJsYXksXHJcbiAgICBjbG9zZTogY2xvc2VPdmVybGF5XHJcbiAgfTtcclxufSgpKTtcclxuXHJcbmNvbnN0IGFqYXhGb3JtID0gZnVuY3Rpb24oZm9ybSkge1xyXG4gIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBkYXRhLmFwcGVuZChcIm5hbWVcIiwgZm9ybS5lbGVtZW50cy5uYW1lLnZhbHVlKTtcclxuICAgIGRhdGEuYXBwZW5kKFwicGhvbmVcIiwgZm9ybS5lbGVtZW50cy5waG9uZS52YWx1ZSk7XHJcbiAgICBkYXRhLmFwcGVuZChcImNvbW1lbnRcIiwgZm9ybS5lbGVtZW50cy50ZXh0YXJlYS52YWx1ZSk7XHJcbiAgICBkYXRhLmFwcGVuZChcInRvXCIsIFwiY2xpZW50QG1haWwucnVcIik7XHJcbiAgXHJcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XHJcbiAgICB4aHIub3BlbignUE9TVCcsJ2h0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbCcpO1xyXG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJYLVJlcXVlc3RlZC1XaXRoXCIsIFwiWE1MSHR0cFJlcXVlc3RcIik7XHJcbiAgICB4aHIuc2VuZChkYXRhKTtcclxuXHJcbiAgICByZXR1cm4geGhyO1xyXG59XHJcblxyXG5jb25zdCBzdWJtaXRGb3JtID0gZnVuY3Rpb24oZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBsZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcmRlci1mb3JtJyk7XHJcbiAgbGV0IHJlcXVlc3QgPSBhamF4Rm9ybShmb3JtKTsgIFxyXG5cclxuICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKT0+IHtcclxuICAgIGxldCByZXBseSA9IGZhbHNlO1xyXG4gICAgaWYgKHJlcXVlc3Quc3RhdHVzID49NDAwKSB7XHJcbiAgICAgIGxldCBjb250ZW50ID0gJ9Ce0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjyDRgSDRgdC10YDQstC10YDQvtC8LCDQv9C+0L/RgNC+0LHRg9C50YLQtSDQv9C+0LfQttC1JztcclxuICAgICAgb3ZlcmxheS5vcGVuKGAke2NvbnRlbnR9LiDQntGI0LjQsdC60LAgJHtyZXF1ZXN0LnN0YXR1c31gLCByZXBseSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3QucmVzcG9uc2Uuc3RhdHVzID09IDApIHtcclxuICAgICAgY29udGVudCA9IHJlcXVlc3QucmVzcG9uc2UubWVzc2FnZTtcclxuICAgICAgb3ZlcmxheS5vcGVuKGNvbnRlbnQsIHJlcGx5KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnRlbnQgPSAn0KHQvtC+0LHRidC10L3QuNC1INC+0YLQv9GA0LDQstC70LXQvdC+JztcclxuICAgICAgcmVwbHkgPSB0cnVlO1xyXG4gICAgICBvdmVybGF5Lm9wZW4oY29udGVudCwgcmVwbHkpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3JkZXItZm9ybScpO1xyXG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm0pOyIsIihmdW5jdGlvbigpIHtcclxuICAgIGxldCBkID0gZG9jdW1lbnQ7XHJcbiAgICBsZXQgbGlzdCA9IGQucXVlcnlTZWxlY3RvcignLmNhbmR5LWJhcl9fbGlzdCcpO1xyXG4gICAgbGV0IGl0ZW1Db3VudCA9IGQucXVlcnlTZWxlY3RvckFsbCgnLmNhbmR5LWJhcl9faXRlbScpLmxlbmd0aDtcclxuICAgIGxldCBzbGlkZXIgPSBkLnF1ZXJ5U2VsZWN0b3IoJy5jYW5keS1iYXJfX3NsaWRlcicpO1xyXG4gICAgbGV0IGJhY2sgPSBkLnF1ZXJ5U2VsZWN0b3IoJyNiYWNrJyk7XHJcbiAgICBsZXQgZm9yd2FyZCA9IGQucXVlcnlTZWxlY3RvcignI2ZvcndhcmQnKTtcclxuICAgIGxldCBwb3MgPSAwO1xyXG4gICAgdmFyIGNsaWVudFgsIGNsaWVudFk7XHJcblxyXG4vL9Ch0LvQsNC50LTQtdGAXHJcblxyXG4gIGZ1bmN0aW9uIHNldFRyYW5zZm9ybSgpIHtcclxuICAgIGxpc3Quc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoJysoLXBvcyAqIHNsaWRlci5vZmZzZXRXaWR0aCkrJ3B4KSc7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwcmV2KCkge1xyXG4gICAgaWYgKHBvcyA9PSAwKXtcclxuICAgICBwb3MgPSBpdGVtQ291bnQgLSAxO1xyXG4gICAgfSBlbHNlIHsgXHJcbiAgICAgIHBvcy0tO1xyXG4gICAgfVxyXG4gICAgc2V0VHJhbnNmb3JtKCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICBpZiAocG9zID09IGl0ZW1Db3VudCAtIDEpe1xyXG4gICAgICBwb3MgPSAwO1xyXG4gICAgfSBlbHNlIHsgXHJcbiAgICAgIHBvcysrO1xyXG4gICAgfVxyXG4gICAgIHNldFRyYW5zZm9ybSgpO1xyXG4gICAgc2V0VHJhbnNmb3JtKCk7XHJcbiAgfVxyXG5cclxuICBiYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJldik7XHJcbiAgZm9yd2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5leHQpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzZXRUcmFuc2Zvcm0pO1xyXG5cclxuLy/QntCx0YDQsNCx0L7RgtC60LAg0YHQvtCx0YvRgtC40Y8gdG91Y2hcclxuXHJcbiAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7ICBcclxuICAgIGNsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgIGNsaWVudFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICB9LCBmYWxzZSk7XHJcblxyXG4gIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciBkZWx0YVgsIGRlbHRhWTtcclxuICAgIFxyXG4gICAgZGVsdGFYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIC0gY2xpZW50WDtcclxuICAgIGRlbHRhWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIGNsaWVudFk7XHJcbiAgICB2YXIgbW9kID0gTWF0aC5hYnMoZGVsdGFYKSAtIE1hdGguYWJzKGRlbHRhWSk7XHJcblxyXG4gICAgaWYgKGRlbHRhWCA8IDAgJiYgbW9kID4gMCkge1xyXG4gICAgICBuZXh0KCk7XHJcbiAgICB9IGVsc2UgaWYgKGRlbHRhWCA+IDAgJiYgbW9kID4gMCkge1xyXG4gICAgICBwcmV2KCk7XHJcbiAgICB9ICAgXHJcbiAgfSwgZmFsc2UpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24oKXtcclxuICBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJldmlld3NfX2xpc3QnKTtcclxuICBjb25zdCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXZpZXdzX19waXgtaXRlbScpO1xyXG4gIGxldCBhY3RpdmUgPSAwO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpdGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBsaXN0LnN0eWxlLmxlZnQgPSAtKGkqMTAwKSsnJSc7XHJcbiAgICAgIGl0ZW1zW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICBpdGVtc1thY3RpdmVdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICBhY3RpdmUgPSBpO1xyXG4gICAgfSkgICAgXHJcbiAgfVxyXG5cclxufSgpKTsiXX0=
