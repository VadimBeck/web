!function(){!function(){let e=document.querySelector(".team__list");e.addEventListener("click",function(t){if(t.preventDefault(),t.target.classList.contains("member__link")){let n=t.target,c=e.querySelector(".member.is-active");if(c&&(c.querySelector(".member__text").style.height="0px",c.classList.remove("is-active")),!c||c.querySelector(".member__link")!=n){let e=n.closest(".member");e.classList.add("is-active");let t=e.querySelector(".member__text");t.style.height=t.scrollHeight+"px"}}})}(),function(){let e=document.querySelectorAll(".menu__block"),t=document.querySelector("body");e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();let n=this,c=document.querySelector(".menu__item.is-active");if(c&&(c.querySelector(".menu__desc").style.width="0px",c.classList.remove("is-active")),!c||c.querySelector(".menu__block")!=n){let e=n.closest(".menu__item");e.classList.add("is-active");let c=e.querySelector(".menu__desc");t.offsetWidth>480?c.style.width=function(){let e=document.documentElement.clientWidth,t=document.querySelectorAll(".menu__block"),n=e-parseFloat(getComputedStyle(t[0]).width)*t.length;return n>550?550:n}()+"px":c.style.width="100%"}})})}()}();const menu=function(){let e=document.querySelector(".menu-btn"),t=document.querySelector(".header"),n=document.querySelector("body"),c=document.querySelector(".nav__list"),o=!1;function s(){e.classList.toggle("is-active"),t.classList.toggle("is-active"),n.classList.toggle("locked"),o=!o}return document.addEventListener("keydown",function(e){27==e.keyCode&&o&&s()}),{menuOver:function(){e.addEventListener("click",s),c.addEventListener("click",function(e){e.target.classList.contains("nav__link")&&n.offsetWidth<=768&&s()})}}}();menu.menuOver();const overlay=function(){let e=document.querySelector("body"),t=document.querySelector(".modal"),n=document.querySelector(".modal__inner"),c=document.createElement("div");c.classList.add("modal__text");let o=document.createElement("button"),s=function(){t.classList.remove("is-active"),e.classList.remove("locked")};return{open:function(l,i){c.textContent=l,i?(o.classList.add("order-button"),o.textContent="Закрыть"):o.classList.add("modal__close"),n.appendChild(c),n.appendChild(o),t.classList.add("is-active"),e.classList.add("locked"),o.addEventListener("click",e=>{e.preventDefault(),s()}),t.addEventListener("click",e=>{e.target===t&&s()}),document.addEventListener("keydown",e=>{27===e.keyCode&&s()})},close:s}}(),ajaxForm=function(e){let t=new FormData;t.append("name",e.elements.name.value),t.append("phone",e.elements.phone.value),t.append("comment",e.elements.textarea.value),t.append("to","client@mail.ru");const n=new XMLHttpRequest;return n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(t),n},submitForm=function(e){e.preventDefault();let t=document.querySelector("#order-form"),n=ajaxForm(t);n.addEventListener("load",()=>{let e=!1;if(n.status>=400){let t="Ошибка соединения с сервером, попробуйте позже";overlay.open(`${t}. Ошибка ${n.status}`,e)}else 0==n.response.status?(content=n.response.message,overlay.open(content,e)):(content="Сообщение отправлено",e=!0,overlay.open(content,e))})},form=document.querySelector("#order-form");form.addEventListener("submit",submitForm),function(){let e=document,t=e.querySelector(".candy-bar__list"),n=e.querySelectorAll(".candy-bar__item").length,c=e.querySelector(".candy-bar__slider"),o=e.querySelector("#back"),s=e.querySelector("#forward"),l=0;var i,r;function a(){t.style.transform="translateX("+-l*c.offsetWidth+"px)"}function u(e,t){var n=!1;return function(){n||(e.apply(this,arguments),n=!0,setTimeout(function(){n=!1},t))}}let d=u(function(){0==l?l=n-1:l--,a()},600),m=u(function(){l==n-1?l=0:l++,a()},600);o.addEventListener("click",d),s.addEventListener("click",m),window.addEventListener("resize",a),c.addEventListener("touchstart",function(e){i=e.touches[0].clientX,r=e.touches[0].clientY},!1),c.addEventListener("touchend",function(e){var t,n;t=e.changedTouches[0].clientX-i,n=e.changedTouches[0].clientY-r;var c=Math.abs(t)-Math.abs(n);t<0&&c>0?trottlenext():t>0&&c>0&&d()},!1)}(),function(){const e=document.querySelectorAll(".reviews__item"),t=document.querySelectorAll(".reviews__pix-item");let n=0;for(let c=0;c<e.length;c++)t[c].addEventListener("click",function(o){o.preventDefault(),e[c].classList.toggle("is-active"),t[c].classList.toggle("is-active"),t[n].classList.toggle("is-active"),e[n].classList.toggle("is-active"),n=c})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZGVvbi5qcyIsIm1lbnUuanMiLCJyZXF1ZXN0LmpzIiwic2xpZGVyLmpzIiwic2xpZGVzaG93LmpzIl0sIm5hbWVzIjpbInRlYW0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJsaW5rIiwiYWN0aXZlIiwic3R5bGUiLCJoZWlnaHQiLCJyZW1vdmUiLCJjdXJyZW50IiwiY2xvc2VzdCIsImFkZCIsImN1cnJlbnRUZXh0Iiwic2Nyb2xsSGVpZ2h0IiwiYWN0aXZhdGVUZWFtIiwibGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYm9keSIsImZvckVhY2giLCJlbGVtIiwidGhpcyIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsInJlcVdpZHRoIiwicGFyc2VGbG9hdCIsImdldENvbXB1dGVkU3R5bGUiLCJsZW5ndGgiLCJ3aWR0aENhbGMiLCJhY3RpdmF0ZU1lbnUiLCJtZW51IiwiYnV0dG9uIiwiaGVhZGVyIiwibmF2IiwiYWN0IiwidG9nZ2xlTWVudSIsInRvZ2dsZSIsImtleUNvZGUiLCJtZW51T3ZlciIsIm92ZXJsYXkiLCJtb2RhbCIsIm1vZGFsSW5uZXIiLCJtb2RhbFRleHQiLCJjcmVhdGVFbGVtZW50IiwiY2xvc2VPdmVybGF5Iiwib3BlbiIsImNvbnRlbnQiLCJyZXBseSIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJjbG9zZSIsImFqYXhGb3JtIiwiZm9ybSIsImRhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImVsZW1lbnRzIiwibmFtZSIsInZhbHVlIiwicGhvbmUiLCJ0ZXh0YXJlYSIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJzdWJtaXRGb3JtIiwicmVxdWVzdCIsInN0YXR1cyIsInJlc3BvbnNlIiwibWVzc2FnZSIsImQiLCJsaXN0IiwiaXRlbUNvdW50Iiwic2xpZGVyIiwiYmFjayIsImZvcndhcmQiLCJwb3MiLCJjbGllbnRYIiwiY2xpZW50WSIsInNldFRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInRocm90dGxlIiwiZnVuYyIsIm1zIiwic3RvcCIsImFwcGx5IiwiYXJndW1lbnRzIiwic2V0VGltZW91dCIsInRyb3R0bGVQcmV2IiwidHJvdHRsZU5leHQiLCJ3aW5kb3ciLCJ0b3VjaGVzIiwiZGVsdGFYIiwiZGVsdGFZIiwiY2hhbmdlZFRvdWNoZXMiLCJtb2QiLCJNYXRoIiwiYWJzIiwidHJvdHRsZW5leHQiLCJpdGVtcyIsInBpeCIsImkiXSwibWFwcGluZ3MiOiJDQUFBLFlBV0EsV0FDQSxJQUFBQSxFQUFBQyxTQUFBQyxjQUFBLGVBQ0FGLEVBQUFHLGlCQUFBLFFBQUEsU0FBQUMsR0FFQSxHQURBQSxFQUFBQyxpQkFDQUQsRUFBQUUsT0FBQUMsVUFBQUMsU0FBQSxnQkFBQSxDQUNBLElBQUFDLEVBQUFMLEVBQUFFLE9BRUFJLEVBQUFWLEVBQUFFLGNBQUEscUJBT0EsR0FMQVEsSUFDQUEsRUFBQVIsY0FBQSxpQkFDQVMsTUFBQUMsT0FBQSxNQUNBRixFQUFBSCxVQUFBTSxPQUFBLGVBRUFILEdBQUFBLEVBQUFSLGNBQUEsa0JBQUFPLEVBQUEsQ0FDQSxJQUFBSyxFQUFBTCxFQUFBTSxRQUFBLFdBQ0FELEVBQUFQLFVBQUFTLElBQUEsYUFFQSxJQUFBQyxFQUFBSCxFQUFBWixjQUFBLGlCQUNBZSxFQUFBTixNQUFBQyxPQUFBSyxFQUFBQyxhQUFBLFNBS0FDLEdBRUEsV0FDQSxJQUFBQyxFQUFBbkIsU0FBQW9CLGlCQUFBLGdCQUNBQyxFQUFBckIsU0FBQUMsY0FBQSxRQUNBa0IsRUFBQUcsUUFBQSxTQUFBQyxHQUNBQSxFQUFBckIsaUJBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFDQSxJQUFBSSxFQUFBZ0IsS0FDQWYsRUFBQVQsU0FBQUMsY0FB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QUEsUUFBQTZGLEdBQ0FDLE9BQUE5RixpQkFBQSxTQUFBbUYsR0FJQU4sRUFBQTdFLGlCQUFBLGFBQUEsU0FBQUMsR0FDQWdGLEVBQUFoRixFQUFBOEYsUUFBQSxHQUFBZCxRQUNBQyxFQUFBakYsRUFBQThGLFFBQUEsR0FBQWIsVUFDQSxHQUVBTCxFQUFBN0UsaUJBQUEsV0FBQSxTQUFBQyxHQUNBLElBQUErRixFQUFBQyxFQUVBRCxFQUFBL0YsRUFBQWlHLGVBQUEsR0FBQWpCLFFBQUFBLEVBQ0FnQixFQUFBaEcsRUFBQWlHLGVBQUEsR0FBQWhCLFFBQUFBLEVBQ0EsSUFBQWlCLEVBQUFDLEtBQUFDLElBQUFMLEdBQUFJLEtBQUFDLElBQUFKLEdBRUFELEVBQUEsR0FBQUcsRUFBQSxFQUNBRyxjQUNBTixFQUFBLEdBQUFHLEVBQUEsR0FDQVAsTUFFQSxHQTNFQSxHQ0FBLFdBQ0EsTUFBQVcsRUFBQXpHLFNBQUFvQixpQkFBQSxrQkFDQXNGLEVBQUExRyxTQUFBb0IsaUJBQUEsc0JBQ0EsSUFBQVgsRUFBQSxFQUVBLElBQUEsSUFBQWtHLEVBQUEsRUFBQUEsRUFBQUYsRUFBQXpFLE9BQUEyRSxJQUNBRCxFQUFBQyxHQUFBekcsaUJBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFDQXFHLEVBQUFFLEdBQUFyRyxVQUFBbUMsT0FBQSxhQUNBaUUsRUFBQUMsR0FBQXJHLFVBQUFtQyxPQUFBLGFBRUFpRSxFQUFBakcsR0FBQUgsVUFBQW1DLE9BQUEsYUFDQWdFLEVBQUFoRyxHQUFBSCxVQUFBbUMsT0FBQSxhQUNBaEMsRUFBQWtHLElBYkEiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1xyXG5cclxuICBmdW5jdGlvbiB3aWR0aENhbGMoKSB7XHJcbiAgICBsZXQgd2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICBsZXQgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudV9fYmxvY2snKTtcclxuICAgIGxldCBsaW5rV2lkdGggPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUobGlua3NbMF0pLndpZHRoKTtcclxuXHJcbiAgICBsZXQgcmVxV2lkdGggPSB3aWR0aCAtIGxpbmtXaWR0aCAqIGxpbmtzLmxlbmd0aDtcclxuICAgIHJldHVybiByZXFXaWR0aCA+IDU1MCA/IDU1MCA6IHJlcVdpZHRoO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBhY3RpdmF0ZVRlYW0oKSB7XHJcbiAgICBsZXQgdGVhbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZWFtX19saXN0Jyk7ICAgXHJcbiAgICB0ZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWVtYmVyX19saW5rJykpe1xyXG4gICAgICAgIGxldCBsaW5rID0gZS50YXJnZXQ7XHJcblxyXG4gICAgICAgIGxldCBhY3RpdmUgPSB0ZWFtLnF1ZXJ5U2VsZWN0b3IoJy5tZW1iZXIuaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIGlmKGFjdGl2ZSkge1xyXG4gICAgICAgICAgbGV0IGFjdGl2ZVRleHQgPSBhY3RpdmUucXVlcnlTZWxlY3RvcignLm1lbWJlcl9fdGV4dCcpOyAgICAgICAgICBcclxuICAgICAgICAgIGFjdGl2ZVRleHQuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XHJcbiAgICAgICAgICBhY3RpdmUuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFhY3RpdmUgfHwgYWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5tZW1iZXJfX2xpbmsnKSAhPSBsaW5rKSB7XHJcbiAgICAgICAgICBsZXQgY3VycmVudCAgPSBsaW5rLmNsb3Nlc3QoJy5tZW1iZXInKTtcclxuICAgICAgICAgIGN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgbGV0IGN1cnJlbnRUZXh0ID0gY3VycmVudC5xdWVyeVNlbGVjdG9yKCcubWVtYmVyX190ZXh0Jyk7XHJcbiAgICAgICAgICBjdXJyZW50VGV4dC5zdHlsZS5oZWlnaHQgPSBjdXJyZW50VGV4dC5zY3JvbGxIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSkgICAgXHJcbiAgfVxyXG4gIGFjdGl2YXRlVGVhbSgpXHJcblxyXG4gIGZ1bmN0aW9uIGFjdGl2YXRlTWVudSgpIHtcclxuICAgIGxldCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51X19ibG9jaycpO1xyXG4gICAgbGV0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7ICBcclxuICAgIGxpbmtzLmZvckVhY2goZnVuY3Rpb24oZWxlbSl7XHJcbiAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IGxpbmsgPSB0aGlzOyAgICAgICAgXHJcbiAgICAgICAgbGV0IGFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19pdGVtLmlzLWFjdGl2ZScpO1xyXG5cclxuICAgICAgICBpZihhY3RpdmUpIHtcclxuICAgICAgICAgIGxldCBhY3RpdmVUZXh0ID0gYWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19kZXNjJyk7ICAgICAgICAgIFxyXG4gICAgICAgICAgYWN0aXZlVGV4dC5zdHlsZS53aWR0aCA9ICcwcHgnO1xyXG4gICAgICAgICAgYWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIWFjdGl2ZSB8fCBhY3RpdmUucXVlcnlTZWxlY3RvcignLm1lbnVfX2Jsb2NrJykgIT0gbGluaykge1xyXG4gICAgICAgICAgbGV0IGN1cnJlbnQgID0gbGluay5jbG9zZXN0KCcubWVudV9faXRlbScpO1xyXG4gICAgICAgICAgY3VycmVudC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICBsZXQgY3VycmVudFRleHQgPSBjdXJyZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19kZXNjJyk7XHJcbiAgICAgICAgICBpZiAoYm9keS5vZmZzZXRXaWR0aCA+IDQ4MCkge1xyXG4gICAgICAgICAgY3VycmVudFRleHQuc3R5bGUud2lkdGggPSB3aWR0aENhbGMoKSArICdweCc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50VGV4dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9ICAgICAgXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuICBhY3RpdmF0ZU1lbnUoKTsgIFxyXG59KCkpO1xyXG5cclxuXHJcbiAgIiwiY29uc3QgbWVudSA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtYnRuJyk7XHJcbiAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKTtcclxuICBsZXQgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuICBsZXQgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdl9fbGlzdCcpO1xyXG4gIGxldCBhY3QgPSBmYWxzZTtcclxuXHJcbiAgZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHtcclxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XHJcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbG9ja2VkJyk7XHJcblxyXG4gICAgICBhY3QgPyBhY3QgPSBmYWxzZSA6IGFjdCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBsZXQgYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSk7XHJcblxyXG4gICAgICAgIG5hdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgbGV0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdl9fbGluaycpICYmIGJvZHkub2Zmc2V0V2lkdGggPD0gNzY4KSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNyAmJiBhY3QpIHtcclxuICAgICAgICAgIHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgcmV0dXJuIHtcclxuICAgIG1lbnVPdmVyOiBhZGRMaXN0ZW5lcnMgIFxyXG4gIH1cclxufSgpKTtcclxubWVudS5tZW51T3ZlcigpOyIsImNvbnN0IG92ZXJsYXkgPSAoZnVuY3Rpb24oKXtcclxuICBsZXQgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuICBsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcclxuICBsZXQgbW9kYWxJbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5uZXInKTtcclxuXHJcbiAgbGV0IG1vZGFsVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIG1vZGFsVGV4dC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9fdGV4dCcpO1xyXG4gIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHJcbiAgbGV0IG9wZW5PdmVybGF5ID0gZnVuY3Rpb24oY29udGVudCwgcmVwbHkpIHtcclxuICAgIG1vZGFsVGV4dC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICBpZihyZXBseSkge1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnb3JkZXItYnV0dG9uJyk7XHJcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQl9Cw0LrRgNGL0YLRjCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnbW9kYWxfX2Nsb3NlJyk7XHJcbiAgICB9XHJcbiAgICBtb2RhbElubmVyLmFwcGVuZENoaWxkKG1vZGFsVGV4dCk7XHJcbiAgICBtb2RhbElubmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcblxyXG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2xvY2tlZCcpO1xyXG5cclxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2xvc2VPdmVybGF5KCk7XHJcbiAgICB9KVxyXG5cclxuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0ID09PSBtb2RhbCkge1xyXG4gICAgICAgIGNsb3NlT3ZlcmxheSgpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgXHJcbiAgICAgICAgY2xvc2VPdmVybGF5KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxldCBjbG9zZU92ZXJsYXkgPSBmdW5jdGlvbigpIHtcclxuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2NrZWQnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBvcGVuOiBvcGVuT3ZlcmxheSxcclxuICAgIGNsb3NlOiBjbG9zZU92ZXJsYXlcclxuICB9O1xyXG59KCkpO1xyXG5cclxuY29uc3QgYWpheEZvcm0gPSBmdW5jdGlvbihmb3JtKSB7XHJcbiAgbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGRhdGEuYXBwZW5kKFwibmFtZVwiLCBmb3JtLmVsZW1lbnRzLm5hbWUudmFsdWUpO1xyXG4gICAgZGF0YS5hcHBlbmQoXCJwaG9uZVwiLCBmb3JtLmVsZW1lbnRzLnBob25lLnZhbHVlKTtcclxuICAgIGRhdGEuYXBwZW5kKFwiY29tbWVudFwiLCBmb3JtLmVsZW1lbnRzLnRleHRhcmVhLnZhbHVlKTtcclxuICAgIGRhdGEuYXBwZW5kKFwidG9cIiwgXCJjbGllbnRAbWFpbC5ydVwiKTtcclxuICBcclxuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgIHhoci5vcGVuKCdQT1NUJywnaHR0cHM6Ly93ZWJkZXYtYXBpLmxvZnRzY2hvb2wuY29tL3NlbmRtYWlsJyk7XHJcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtUmVxdWVzdGVkLVdpdGhcIiwgXCJYTUxIdHRwUmVxdWVzdFwiKTtcclxuICAgIHhoci5zZW5kKGRhdGEpO1xyXG5cclxuICAgIHJldHVybiB4aHI7XHJcbn1cclxuXHJcbmNvbnN0IHN1Ym1pdEZvcm0gPSBmdW5jdGlvbihlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29yZGVyLWZvcm0nKTtcclxuICBsZXQgcmVxdWVzdCA9IGFqYXhGb3JtKGZvcm0pOyAgXHJcblxyXG4gIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpPT4ge1xyXG4gICAgbGV0IHJlcGx5ID0gZmFsc2U7XHJcbiAgICBpZiAocmVxdWVzdC5zdGF0dXMgPj00MDApIHtcclxuICAgICAgbGV0IGNvbnRlbnQgPSAn0J7RiNC40LHQutCwINGB0L7QtdC00LjQvdC10L3QuNGPINGBINGB0LXRgNCy0LXRgNC+0LwsINC/0L7Qv9GA0L7QsdGD0LnRgtC1INC/0L7Qt9C20LUnO1xyXG4gICAgICBvdmVybGF5Lm9wZW4oYCR7Y29udGVudH0uINCe0YjQuNCx0LrQsCAke3JlcXVlc3Quc3RhdHVzfWAsIHJlcGx5KTtcclxuICAgIH0gZWxzZSBpZiAocmVxdWVzdC5yZXNwb25zZS5zdGF0dXMgPT0gMCkge1xyXG4gICAgICBjb250ZW50ID0gcmVxdWVzdC5yZXNwb25zZS5tZXNzYWdlO1xyXG4gICAgICBvdmVybGF5Lm9wZW4oY29udGVudCwgcmVwbHkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29udGVudCA9ICfQodC+0L7QsdGJ0LXQvdC40LUg0L7RgtC/0YDQsNCy0LvQtdC90L4nO1xyXG4gICAgICByZXBseSA9IHRydWU7XHJcbiAgICAgIG92ZXJsYXkub3Blbihjb250ZW50LCByZXBseSk7XHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG5cclxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcmRlci1mb3JtJyk7XHJcbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybSk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGQgPSBkb2N1bWVudDtcclxuICAgIGxldCBsaXN0ID0gZC5xdWVyeVNlbGVjdG9yKCcuY2FuZHktYmFyX19saXN0Jyk7XHJcbiAgICBsZXQgaXRlbUNvdW50ID0gZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FuZHktYmFyX19pdGVtJykubGVuZ3RoO1xyXG4gICAgbGV0IHNsaWRlciA9IGQucXVlcnlTZWxlY3RvcignLmNhbmR5LWJhcl9fc2xpZGVyJyk7XHJcbiAgICBsZXQgYmFjayA9IGQucXVlcnlTZWxlY3RvcignI2JhY2snKTtcclxuICAgIGxldCBmb3J3YXJkID0gZC5xdWVyeVNlbGVjdG9yKCcjZm9yd2FyZCcpO1xyXG4gICAgbGV0IHBvcyA9IDA7XHJcbiAgICB2YXIgY2xpZW50WCwgY2xpZW50WTtcclxuXHJcbi8v0KHQu9Cw0LnQtNC10YBcclxuXHJcbiAgZnVuY3Rpb24gc2V0VHJhbnNmb3JtKCkge1xyXG4gICAgbGlzdC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnKygtcG9zICogc2xpZGVyLm9mZnNldFdpZHRoKSsncHgpJztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHByZXYgKCkge1xyXG4gICAgaWYgKHBvcyA9PSAwKXtcclxuICAgICBwb3MgPSBpdGVtQ291bnQgLSAxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcG9zLS07XHJcbiAgICB9XHJcbiAgICBzZXRUcmFuc2Zvcm0oKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgIGlmIChwb3MgPT0gaXRlbUNvdW50IC0gMSl7XHJcbiAgICAgIHBvcyA9IDA7XHJcbiAgICB9IGVsc2UgeyBcclxuICAgICAgcG9zKys7XHJcbiAgICB9XHJcbiAgICBzZXRUcmFuc2Zvcm0oKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIG1zKSB7XHJcbiAgICB2YXIgc3RvcCA9IGZhbHNlO1xyXG4gIFxyXG4gICAgZnVuY3Rpb24gd3JhcCgpIHsgIFxyXG4gICAgICBpZiAoc3RvcCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7ICBcclxuICAgICAgc3RvcCA9IHRydWU7ICBcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICBzdG9wID0gZmFsc2U7XHJcbiAgICAgIH0sIG1zKTtcclxuICAgIH0gIFxyXG4gICAgcmV0dXJuIHdyYXA7XHJcbiAgfVxyXG4gIGxldCB0cm90dGxlUHJldiA9IHRocm90dGxlKHByZXYsIDYwMCk7XHJcbiAgbGV0IHRyb3R0bGVOZXh0ID0gdGhyb3R0bGUobmV4dCwgNjAwKTtcclxuXHJcbiAgYmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRyb3R0bGVQcmV2KTtcclxuICBmb3J3YXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdHJvdHRsZU5leHQpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzZXRUcmFuc2Zvcm0pO1xyXG5cclxuLy/QntCx0YDQsNCx0L7RgtC60LAg0YHQvtCx0YvRgtC40Y8gdG91Y2hcclxuXHJcbiAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7ICBcclxuICAgIGNsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgIGNsaWVudFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICB9LCBmYWxzZSk7XHJcblxyXG4gIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciBkZWx0YVgsIGRlbHRhWTtcclxuICAgIFxyXG4gICAgZGVsdGFYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIC0gY2xpZW50WDtcclxuICAgIGRlbHRhWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIGNsaWVudFk7XHJcbiAgICB2YXIgbW9kID0gTWF0aC5hYnMoZGVsdGFYKSAtIE1hdGguYWJzKGRlbHRhWSk7XHJcblxyXG4gICAgaWYgKGRlbHRhWCA8IDAgJiYgbW9kID4gMCkge1xyXG4gICAgICB0cm90dGxlbmV4dCgpO1xyXG4gICAgfSBlbHNlIGlmIChkZWx0YVggPiAwICYmIG1vZCA+IDApIHtcclxuICAgICAgdHJvdHRsZVByZXYoKTtcclxuICAgIH0gICBcclxuICB9LCBmYWxzZSk7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbigpe1xyXG4gIGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJldmlld3NfX2l0ZW0nKTtcclxuICBjb25zdCBwaXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmV2aWV3c19fcGl4LWl0ZW0nKTtcclxuICBsZXQgYWN0aXZlID0gMDtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgcGl4W2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGl0ZW1zW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICBwaXhbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XHJcbiAgICAgXHJcbiAgICAgIHBpeFthY3RpdmVdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICBpdGVtc1thY3RpdmVdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICBhY3RpdmUgPSBpOyAgICAgXHJcbiAgICB9KVxyXG4gIH1cclxufSgpKTsiXX0=
